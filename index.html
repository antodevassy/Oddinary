<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Oddinary</title>
    <link rel="icon" type="image/png" href="fav-icon.png">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700;900&display=swap" rel="stylesheet">
    <script src="words-data.js"></script>
    <style>
        :root {
            /* Palette */
            --bg-dark: #0E0F13;
            --bg-card: #181A20;
            --primary: #6BCF2D;
            --primary-glow: #9CFF3A;
            --danger: #D93A3A;
            --danger-glow: #8E1E1E;
            --accent-gold: #C9A45D;
            --accent-light: #E6C48A;
            --text-main: #F2F2F2;
            --text-sec: #B6B8C0;
            --text-muted: #6C6F78;

            /* Effects */
            --shadow-card: 0 10px 30px rgba(0,0,0,0.5);
            --glow-primary: 0 0 20px rgba(107, 207, 45, 0.3);
            --glow-danger: 0 0 20px rgba(217, 58, 58, 0.3);
            --radius: 16px;
        }

        * { 
            margin: 0; 
            padding: 0; 
            box-sizing: border-box; 
            -webkit-tap-highlight-color: transparent; 
        }
        
        /* Hide scrollbar but keep scroll functionality */
        * {
            scrollbar-width: none; /* Firefox */
            -ms-overflow-style: none; /* IE and Edge */
        }
        *::-webkit-scrollbar {
            display: none; /* Chrome, Safari, Opera */
        }
        
        html {
            scroll-behavior: smooth;
        }
        
        body {
            font-family: 'Inter', sans-serif;
            background-color: var(--bg-dark);
            color: var(--text-main);
            min-height: 100vh;
            overflow-x: hidden; /* Prevent horizontal scroll only */
            overflow-y: auto; /* Allow vertical scroll */
            display: flex;
            flex-direction: column;
            text-align: center; /* Global center text */
        }

        /* Typography */
        h1, h2, h3 { font-weight: 900; letter-spacing: -0.5px; }
        .text-glow { text-shadow: 0 0 15px rgba(156, 255, 58, 0.5); }
        .text-danger { color: var(--danger); text-shadow: 0 0 15px rgba(217, 58, 58, 0.5); }
        .text-gold { color: var(--accent-gold); }
        
        /* Layout Containers */
        #app {
            flex: 1;
            display: flex;
            flex-direction: column;
            width: 100%;
            max-width: 600px;
            margin: 0 auto;
            padding: 20px;
            position: relative;
            min-height: 100vh;
        }

        .screen {
            display: none;
            flex-direction: column;
            min-height: calc(100vh - 40px);
            animation: fadeIn 0.25s ease-out;
            justify-content: center;
            align-items: center;
            gap: 0;
            padding: 20px 0;
        }
        .screen.active { display: flex; }

        .content-area {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            width: 100%;
            text-align: center;
            gap: 15px;
        }

        /* Specific fix for Reveal Screen scrollbar */
        #screen-reveal .content-area {
            overflow: hidden !important; /* Force no scroll during animation */
            justify-content: center;
        }

        /* Components */
        .btn {
            background: var(--bg-card);
            color: var(--text-main);
            border: 2px solid var(--text-muted);
            padding: 18px;
            border-radius: var(--radius);
            font-size: 1.1rem;
            font-weight: 700;
            cursor: pointer;
            transition: all 0.15s cubic-bezier(0.25, 0.8, 0.25, 1); /* Faster */
            width: 100%;
            min-height: 54px; /* Accessibility: minimum tap target */
            margin-bottom: 12px;
            text-transform: uppercase;
            letter-spacing: 1px;
            /* Center text in button */
            display: flex;
            justify-content: center;
            align-items: center;
            position: relative;
            user-select: none;
            -webkit-user-select: none;
            touch-action: manipulation; /* Prevent double-tap zoom */
        }

        .btn:active { 
            transform: scale(0.97); 
            opacity: 0.9;
            box-shadow: inset 0 2px 8px rgba(0,0,0,0.3);
        }

        .btn-primary {
            background: var(--primary);
            color: var(--bg-dark);
            border: none;
            box-shadow: var(--glow-primary);
        }
        .btn-primary:hover {
            background: var(--primary-glow);
            box-shadow: 0 0 30px rgba(156, 255, 58, 0.6);
        }
        .btn-primary:active {
            background: #5AB825;
        }

        .btn-danger {
            background: var(--danger);
            color: white;
            border: none;
            box-shadow: var(--glow-danger);
        }
        .btn-danger:active {
            background: #B82E2E;
        }
        
        .btn-icon {
            width: 54px; /* Increased for better tap target */
            min-height: 54px;
            padding: 0;
            display: flex;
            justify-content: center; /* Center icon */
            align-items: center;
            margin-left: 10px;
            /* color: var(--danger);  REMOVED to inherit white from btn-danger */
            border-color: var(--danger);
            margin-bottom: 0; /* Align with input */
        }

        .btn-icon svg {
             width: 24px;
             height: 24px;
             fill: currentColor;
        }

        .btn:disabled {
            opacity: 0.5;
            cursor: not-allowed;
            filter: grayscale(1);
            pointer-events: none;
        }

        .input-group {
            width: 100%;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            justify-content: center; /* Center content */
            animation: slideIn 0.2s ease; /* Faster */
        }

        input {
            flex: 1;
            background: var(--bg-card);
            border: 2px solid var(--text-muted);
            padding: 15px;
            border-radius: var(--radius);
            color: white;
            font-size: 1.1rem;
            outline: none;
            transition: border-color 0.15s; /* Faster */
            text-align: center; /* Center input text */
        }
        input:focus { border-color: var(--primary); box-shadow: var(--glow-primary); }

        .card-container {
            perspective: 1000px;
            width: 100%;
            max-width: 350px;
            height: 400px;
            margin: 20px auto; 
            cursor: pointer;
        }

        .card {
            width: 100%;
            height: 100%;
            position: relative;
            transform-style: preserve-3d;
            transition: transform 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275); /* Faster */
            border-radius: 24px;
        }

        .card.flipped { transform: rotateY(180deg); }

        .card-face {
            position: absolute;
            width: 100%;
            height: 100%;
            backface-visibility: hidden;
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            background: var(--bg-card);
            border: 2px solid var(--text-muted);
            border-radius: 24px;
            box-shadow: var(--shadow-card);
            padding: 30px;
            text-align: center;
        }

        .card-front {
            background: linear-gradient(145deg, var(--bg-card), #22252b);
            border-color: var(--primary);
        }

        .card-back {
            background: var(--bg-card);
            transform: rotateY(180deg);
            border: 2px solid var(--primary);
            box-shadow: inset 0 0 50px rgba(107, 207, 45, 0.1);
        }

        .list-item {
            background: var(--bg-card);
            padding: 15px 25px; /* Added horizontal padding */
            border-radius: var(--radius);
            margin-bottom: 10px;
            display: flex;
            justify-content: space-between; /* WIDE separation */
            align-items: center;
            width: 100%;
            border: 1px solid rgba(255,255,255,0.05);
            text-align: center;
        }

        .logo-img {
            width: 100%; 
            max-width: 600px; /* Even Bigger */
            height: auto;
            margin-bottom: -10px; /* NEGATIVE margin to pull buttons up */
            filter: drop-shadow(0 0 25px rgba(107, 207, 45, 0.4));
        }

        /* Vote Bar Animation */
        .vote-bar-container {
            width: 100%;
            height: 40px;
            background: #252830;
            border-radius: 20px;
            overflow: hidden;
            margin-top: 5px;
            position: relative;
        }
        .vote-bar-fill {
            height: 100%;
            background: var(--primary);
            width: 0%;
            transition: width 1s cubic-bezier(0.25, 0.8, 0.25, 1);
        }
        .vote-count-text {
            position: absolute;
            right: 15px;
            top: 50%;
            transform: translateY(-50%);
            font-weight: bold;
            color: white;
            text-shadow: 0 0 4px rgba(0,0,0,0.8);
        }

        /* Footer */
        .footer-copyright {
            padding: 10px;
            text-align: center;
            color: var(--text-muted);
            font-size: 0.8rem;
            width: 100%;
            /* Not pushing to bottom anymore, just part of flow */
        }

        /* Animations */
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
        @keyframes slideIn { from { opacity: 0; transform: translateX(-10px); } to { opacity: 1; transform: translateX(0); } }
        
        @keyframes pulse-ring {
            0% { transform: scale(0.9); box-shadow: 0 0 0 0 rgba(107, 207, 45, 0.7); }
            70% { transform: scale(1); box-shadow: 0 0 0 30px rgba(107, 207, 45, 0); }
            100% { transform: scale(0.9); box-shadow: 0 0 0 0 rgba(107, 207, 45, 0); }
        }

        .pulse-anim {
            width: 100px; height: 100px;
            border-radius: 50%;
            background: var(--bg-card);
            border: 4px solid var(--primary);
            display: flex; justify-content: center; align-items: center;
            font-size: 3rem;
            margin: 40px auto;
            animation: pulse-ring 1.5s infinite; /* Faster */
        }

        /* Utilities */
        .hidden { display: none !important; }
        .text-c { text-align: center; }
        .mb-2 { margin-bottom: 20px; }
        .mt-2 { margin-top: 20px; }
        .badge {
            background: #333;
            padding: 5px 10px;
            border-radius: 8px;
            font-size: 0.8rem;
            color: var(--text-sec);
        }

        .switch-container {
            display: flex;
            justify-content: center; /* Centered items */
            gap: 20px; /* Spacing */
            align-items: center;
            width: 100%;
            margin-bottom: 12px;
            padding: 15px;
            background: var(--bg-card);
            border-radius: var(--radius);
        }

        /* Toggle Switch */
        .switch { position: relative; display: inline-block; width: 50px; height: 28px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider {
            position: absolute; cursor: pointer;
            top: 0; left: 0; right: 0; bottom: 0;
            background-color: #333; transition: .3s; /* Faster */
            border-radius: 34px;
        }
        .slider:before {
            position: absolute; content: "";
            height: 20px; width: 20px;
            left: 4px; bottom: 4px;
            background-color: white; transition: .3s; /* Faster */
            border-radius: 50%;
        }
        input:checked + .slider { background-color: var(--primary); }
        input:checked + .slider:before { transform: translateX(22px); }

        /* Modal */
        .modal {
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(14,15,19,0.95);
            backdrop-filter: blur(10px);
            z-index: 1000;
            display: none; /* Default hidden */
            align-items: center;
            justify-content: center;
            padding: 20px;
        }
        .modal.open { display: flex; animation: fadeIn 0.2s ease-out; } /* Faster */

        .modal-content {
            max-width: 500px;
            width: 100%;
            background: var(--bg-card);
            padding: 30px;
            border-radius: var(--radius);
            border: 2px solid var(--text-muted);
            max-height: 80vh;
            overflow-y: auto;
        }

        /* Close Button */
        .close-btn {
            position: fixed;
            top: 30px;
            right: calc(50% - 280px);
            width: 44px;
            height: 44px;
            background: var(--bg-card);
            border: 2px solid var(--danger);
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            color: var(--danger);
            font-size: 1.5rem;
            font-weight: bold;
            transition: background 0.15s, color 0.15s;
            z-index: 100;
            user-select: none;
            touch-action: manipulation;
        }
        .close-btn:active {
            background: var(--danger);
            color: white;
        }
        
        @media (max-width: 640px) {
            .close-btn {
                right: 20px;
            }
        }

        /* Timer Slider */
        .timer-control {
            width: 100%;
            max-width: 400px;
            margin: 15px auto;
            padding: 20px 25px;
            background: linear-gradient(145deg, var(--bg-card), #1a1c22);
            border-radius: var(--radius);
            border: 2px solid rgba(107, 207, 45, 0.2);
            box-shadow: 0 4px 15px rgba(0,0,0,0.3), inset 0 1px 0 rgba(255,255,255,0.05);
        }

        .slider-input {
            width: 100%;
            height: 10px;
            border-radius: 5px;
            background: linear-gradient(to right, #2a2d35, #1f2128);
            outline: none;
            -webkit-appearance: none;
            margin: 15px 0;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.3);
        }

        .slider-input::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            width: 26px;
            height: 26px;
            border-radius: 50%;
            background: linear-gradient(145deg, var(--primary-glow), var(--primary));
            cursor: pointer;
            box-shadow: 0 0 15px rgba(107, 207, 45, 0.5), 0 2px 8px rgba(0,0,0,0.4);
            transition: all 0.2s;
        }
        
        .slider-input::-webkit-slider-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(107, 207, 45, 0.7), 0 2px 8px rgba(0,0,0,0.4);
        }

        .slider-input::-moz-range-thumb {
            width: 26px;
            height: 26px;
            border-radius: 50%;
            background: linear-gradient(145deg, var(--primary-glow), var(--primary));
            cursor: pointer;
            border: none;
            box-shadow: 0 0 15px rgba(107, 207, 45, 0.5), 0 2px 8px rgba(0,0,0,0.4);
            transition: all 0.2s;
        }
        
        .slider-input::-moz-range-thumb:hover {
            transform: scale(1.1);
            box-shadow: 0 0 20px rgba(107, 207, 45, 0.7), 0 2px 8px rgba(0,0,0,0.4);
        }

        .timer-value {
            font-size: 2.2rem;
            font-weight: 900;
            color: var(--primary);
            text-shadow: 0 0 20px rgba(107, 207, 45, 0.4);
            margin: 5px 0;
            letter-spacing: 2px;
        }

        /* Player List Modal */
        .player-select-list {
            max-height: 400px;
            overflow-y: auto;
            margin: 20px 0;
        }

        .player-select-item {
            background: var(--bg-card);
            padding: 15px 20px;
            margin: 8px 0;
            border-radius: var(--radius);
            border: 2px solid var(--text-muted);
            cursor: pointer;
            transition: all 0.2s;
            font-size: 1.1rem;
            font-weight: 600;
            min-height: 54px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .player-select-item:active {
            transform: scale(0.98);
            border-color: var(--primary);
            background: rgba(107, 207, 45, 0.1);
        }

        /* Error Message */
        .error-msg {
            color: var(--danger);
            font-size: 0.9rem;
            margin-top: 5px;
            display: none;
            text-align: center;
        }
        .error-msg.show {
            display: block;
            animation: shake 0.3s;
        }

        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px); }
            75% { transform: translateX(5px); }
        }

        /* --- MOBILE OPTIMIZATION --- */
        @media (max-width: 480px) {
            h1 { font-size: 1.8rem !important; }
            h2 { font-size: 1.5rem !important; }
            h3 { font-size: 1.1rem !important; }
            
            .btn {
                padding: 14px;
                font-size: 1rem;
                border-width: 1px;
            }
            
            .input-group input { padding: 12px; font-size: 1rem; }
            .btn-icon { width: 44px; }
            
            .card-container {
                height: 340px;
                max-width: 280px;
            }
            .card-face h1 { font-size: 2rem !important; }
            
            .pulse-anim { width: 80px; height: 80px; font-size: 2.2rem; }
            .vote-bar-container { height: 32px; }
            .vote-count-text { font-size: 0.9rem; }
            
            .list-item { padding: 12px 15px; }
            .list-item span { font-size: 1rem !important; }

            /* Ensure highlight text scales but stays relatively large */
            #voter-name { font-size: 2rem !important; }
            #confirm-vote-name { font-size: 1.3rem !important; }
        }
    </style>
</head>
<body>

<div id="app">
    <!-- 1. Landing Screen -->
    <div id="screen-landing" class="screen active">
        <!-- Center Stack -->
        <img src="logo.png" alt="Oddinary" class="logo-img" onerror="this.src='';this.innerHTML='<h1>Oddinary</h1>'">
        
        <div style="width: 100%; display: flex; flex-direction: column; align-items: center;">
            <button class="btn btn-primary" onclick="Game.goToSetup()">Start Game</button>
            <button class="btn" onclick="Game.toggleRules()">How to Play?</button>
            
            <h3 class="text-muted text-c mt-2 mb-2" style="font-size: 0.9rem;">GAME SETTINGS</h3>
            
            <div class="switch-container">
                <span>Shuffle Player Order</span>
                <label class="switch">
                    <input type="checkbox" id="setting-shuffle">
                    <span class="slider"></span>
                </label>
            </div>
            
            <div class="switch-container">
                <span>Discussion Timer</span>
                <label class="switch">
                    <input type="checkbox" id="setting-timer" onchange="Game.toggleTimerSettings()">
                    <span class="slider"></span>
                </label>
            </div>
            
            <div id="timer-slider-container" class="timer-control hidden">
                <p class="text-muted" style="margin-bottom: 10px;">Timer Duration</p>
                <div class="timer-value" id="timer-value-display">3 min</div>
                <input type="range" min="1" max="5" value="3" class="slider-input" id="timer-duration-slider" oninput="Game.updateTimerValue(this.value)">
                <div style="display: flex; justify-content: space-between; color: var(--text-muted); font-size: 0.8rem;">
                    <span>1 min</span>
                    <span>5 min</span>
                </div>
            </div>
        </div>
        
        <div class="footer-copyright"><br><br>¬© Anto Devassy V.P</div>
    </div>

    <!-- How To Play Modal Overlay -->
    <div id="modal-rules" class="modal">
        <div style="max-width: 500px; width: 100%;">
            <h2 class="text-primary mb-2 text-c">How to Play?</h2>
            <div style="text-align: center; line-height: 1.6; color: var(--text-sec); display: flex; flex-direction: column; align-items: center;">
                <p class="mb-2">1. Everyone gets a secret word.</p>
                <p class="mb-2">2. <strong>One player</strong> gets a slightly different word (The Imposter).</p>
                <p class="mb-2">3. Describe your word without revealing it directly.</p>
                <p class="mb-2">4. Vote for who you think is the Imposter!</p>
                <p class="mb-2 text-gold">If the Imposter is caught, they lose... unless they can guess the common word!</p>
            </div>
            <button class="btn btn-primary mt-2" onclick="Game.toggleRules()">Got It</button>
        </div>
    </div>

    <!-- 2. Player Setup -->
    <div id="screen-setup" class="screen">
        <div style="width: 100%; display: flex; flex-direction: column; align-items: center; gap: 15px;">
            <h2 class="text-c">PLAYERS</h2>
            
            <!-- Error Message -->
            <div id="setup-error" class="error-msg"></div>
            
            <!-- List Container -->
            <div id="players-list" style="width: 100%; max-height: 60vh; overflow-y: auto;">
                <!-- Dynamic Inputs -->
            </div>
            
            <button class="btn" onclick="Game.addPlayer()" style="border-style: dashed;">+ Add Player</button>
            
            <button class="btn btn-primary" onclick="Game.startGame()">Start</button>
            <button class="btn" onclick="Game.goHome()">Back</button>
        </div>
    </div>

    <!-- 3. Word Reveal (Pass N Play) -->
    <div id="screen-reveal" class="screen">
        <div class="close-btn" onclick="Game.askCloseReveal()" title="Close">‚úï</div>
        <div class="content-area">
            <h3 class="text-muted">Pass device to</h3>
            <h1 id="reveal-player-name" class="text-primary text-glow mb-2" style="font-size: 2.5rem;">Player Name</h1>
            
            <p id="reveal-counter" class="text-muted" style="margin-bottom: 10px;">Player 1/3</p>
            
            <div class="card-container" onclick="Game.flipCard()">
                <div class="card" id="word-card">
                    <div class="card-face card-front">
                        <span style="font-size: 3rem;">üïµÔ∏è</span>
                        <h3><br>Tap to Reveal</h3>
                        <p class="text-muted"><br>Keep it secret!</p>
                    </div>
                    <div class="card-face card-back">
                        <p class="text-muted">Your secret word is:</p>
                        <br>
                        <h1 id="secret-word-display" style="font-size: 2.5rem; color: var(--primary);">WORD</h1>
                    </div>
                </div>
            </div>
        </div>
        <button id="btn-next-player" class="btn btn-primary hidden" onclick="Game.nextReveal()">Hide & Pass</button>
    </div>

    <!-- 4. Discussion Phase -->
    <div id="screen-discuss" class="screen">
        <div class="content-area">
            <div class="pulse-anim">üó£Ô∏è</div>
            <h1 class="text-gold">DISCUSSION TIME</h1>
            <p class="text-c text-muted">Describe your word, but don't say it directly. Find the Imposter.</p>
            <br>
            <div id="timer-display" class="hidden" style="font-size: 3rem; font-weight: 900; color: var(--text-main); margin: 30px 0;">
                03:00
            </div>
            
            <button class="btn" onclick="Game.showForgotWord()">Forgot Your Word?</button>
            <button class="btn btn-primary" onclick="Game.startVoting()">Start Voting</button>
        </div>
    </div>

    <!-- 5. Voting Phase -->
    <div id="screen-voting" class="screen">
        <div style="width: 100%; display: flex; flex-direction: column; align-items: center; gap: 15px;">
            <h3 class="text-c text-muted">Pass to</h3>
            <h1 id="voter-name" class="text-primary text-glow" style="font-size: 2.5rem;">Player</h1>
            <h2 class="text-c">Who is the Imposter?</h2><br>
            
            <div class="content-area" id="voting-list">
                <!-- Voting Buttons -->
            </div>
        </div>
    </div>

    <!-- Confirmation Modal -->
    <div id="modal-vote-confirm" class="modal">
        <div style="max-width: 400px; width: 100%; text-align: center;">
            <h2 class="text-white mb-2">Confirm Vote?</h2>
            <p class="text-muted mb-2">Are you sure you want to vote for: <span id="confirm-vote-name" class="text-primary" style="display: block; font-size: 1.5rem; font-weight: 900; margin-top: 10px;">Player</span></p>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" style="flex:1" onclick="Game.cancelVote()">Cancel</button>
                <button class="btn btn-danger" style="flex:1" onclick="Game.confirmVote()">Vote</button>
            </div>
        </div>
    </div>

    <!-- Confirmation Modal for New Game -->
    <div id="modal-new-game-confirm" class="modal">
        <div style="max-width: 400px; width: 100%; text-align: center;">
            <h2 class="text-white mb-2">Reset Game?</h2>
            <p class="text-muted mb-2">This will clear all the scores. Are you sure?</p>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" style="flex:1" onclick="Game.cancelNewGame()">Cancel</button>
                <button class="btn btn-danger" style="flex:1" onclick="Game.confirmNewGame()">Reset</button>
            </div>
        </div>
    </div>

    <!-- Close Reveal Confirmation Modal -->
    <div id="modal-close-reveal" class="modal">
        <div style="max-width: 400px; width: 100%; text-align: center;">
            <h2 class="text-white mb-2">Go to Leaderboard?</h2>
            <p class="text-muted mb-2">Are you sure you want to leave the word reveal?</p>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" style="flex:1" onclick="Game.cancelCloseReveal()">Cancel</button>
                <button class="btn btn-primary" style="flex:1" onclick="Game.confirmCloseReveal()">Continue</button>
            </div>
        </div>
    </div>

    <!-- Forgot Word Modal -->
    <div id="modal-forgot-word" class="modal">
        <div class="modal-content">
            <h2 class="text-primary mb-2 text-c">Select Your Name</h2>
            <p class="text-muted text-c">Choose your name to see your word.</p>
            <div id="forgot-word-player-list" class="player-select-list">
                <!-- Dynamic player list -->
            </div>
            <button class="btn btn-danger" onclick="Game.closeForgotWord()">Cancel</button>
        </div>
    </div>

    <!-- Confirm Forgot Word Modal -->
    <div id="modal-confirm-forgot" class="modal">
        <div style="max-width: 400px; width: 100%; text-align: center;">
            <h2 class="text-white mb-2">Confirm Selection</h2>
            <p class="text-muted mb-2">Show word for: <span id="confirm-forgot-name" class="text-primary" style="display: block; font-size: 1.5rem; font-weight: 900; margin-top: 10px;">Player</span></p>
            <div style="display: flex; gap: 10px; margin-top: 20px;">
                <button class="btn" style="flex:1" onclick="Game.cancelForgotConfirm()">Cancel</button>
                <button class="btn btn-primary" style="flex:1" onclick="Game.showForgotWordReveal()">Show Word</button>
            </div>
        </div>
    </div>

    <!-- Forgot Word Reveal Modal -->
    <div id="modal-word-reveal" class="modal">
        <div style="max-width: 400px; width: 100%; text-align: center;">
            <h2 class="text-muted mb-2">Your word is:</h2>
            <h1 id="forgot-word-display" class="text-primary text-glow" style="font-size: 3rem; margin: 30px 0;">WORD</h1>
            <button class="btn btn-primary" onclick="Game.closeWordReveal()">Got It</button>
        </div>
    </div>

    <!-- Points Rules Modal -->
    <div id="modal-points-rules" class="modal">
        <div class="modal-content">
            <h2 class="text-primary mb-2 text-c">POINTS RULES</h2>
            <div style="text-align: left; line-height: 1.8; color: var(--text-sec);">
                <h3 class="text-gold" style="margin-top: 15px; margin-bottom: 10px;">Perfect Escape (Imposter)</h3>
                <p><strong class="text-primary">+20 points</strong> - Imposter receives zero votes.</p>
                
                <h3 class="text-gold" style="margin-top: 15px; margin-bottom: 10px;">Imposter Caught</h3>
                <p><strong class="text-primary">+10 points</strong> - Each player who correctly voted for the imposter.</p>
                
                <h3 class="text-gold" style="margin-top: 15px; margin-bottom: 10px;">Imposter Escapes</h3>
                <p><strong class="text-primary">+15 points</strong> - Imposter (if they received at least 1 vote but not the most).</p>
                <p><strong class="text-primary">+5 points</strong> - Each player who voted for the imposter.</p>
                
                <h3 class="text-gold" style="margin-top: 15px; margin-bottom: 10px;">Draw</h3>
                <p><strong class="text-primary">+5 points</strong> - Imposter (for not getting caught).</p>
                <p><strong class="text-primary">+5 points</strong> - Each player who voted for the imposter.</p>
                <p><strong class="text-muted">0 points</strong> - Players who didn't vote for the imposter.</p>
            </div>
            <button class="btn btn-primary mt-2" onclick="Game.closePointsRules()">Got it!</button>
        </div>
    </div>

    <!-- 6. Results -->
    <div id="screen-results" class="screen">
        <div style="width: 100%; display: flex; flex-direction: column; align-items: center; gap: 15px;">
            <div class="content-area" id="results-area">
                <!-- Dynamic Results -->
            </div>
            
            <h3 id="imposter-reveal-text" class="text-c text-danger"></h3>

            <div style="background: var(--bg-card); padding: 15px; border-radius: var(--radius); width: 100%;">
               <div style="display:flex; justify-content:center; gap: 20px; align-items:center;">
                 <span class="text-muted">Common Word:</span>
                 <strong id="res-common-word" class="text-primary">Word</strong>
               </div>
               <div style="display:flex; justify-content:center; gap: 20px; align-items:center; margin-top: 10px;">
                 <span class="text-muted">Odd Word:</span>
                 <strong id="res-odd-word" class="text-danger">Word</strong>
               </div>
            </div>

            <button class="btn" onclick="Game.showPointsRules()">Points Rules</button>
            <button class="btn btn-primary" onclick="Game.goToScoreboard()">Leaderboard</button>
        </div>
    </div>

    <!-- 7. Leaderboard -->
    <div id="screen-scoreboard" class="screen">
        <div style="width: 100%; display: flex; flex-direction: column; align-items: center; gap: 15px;">
            <h1 class="text-c text-gold">LEADERBOARD</h1>
            <div class="content-area" id="scoreboard-list" style="width: 100%;">
                <!-- Scores -->
            </div>
            
            <button class="btn" onclick="Game.backToResults()">Back to Scoreboard</button>
            <button class="btn btn-primary" onclick="Game.setupNextRound()">Next Round</button>
            <button class="btn" onclick="Game.askNewGame()">New Game</button>
        </div>
    </div>
</div>

<script>
/**
 * ODDINARY GAME ENGINE
 * Fully Updated with All Requirements
 */

// --- Initialize Word Selector ---
const wordSelector = new WordSelector();

// --- State ---
const State = {
    players: [],
    playerOrder: [], 
    roles: {}, 
    words: { common: "", odd: "" },
    currentOddPlayerId: null,
    votes: {}, 
    round: 0,
    config: { shuffle: false, timer: false, timerDuration: 3 },
    stepIndex: 0,
    pendingVoteTarget: null, // For vote confirmation
    pendingForgotPlayer: null, // For forgot word confirmation
    timerInterval: null
};

const $ = (id) => document.getElementById(id);
const Screens = ['landing', 'setup', 'reveal', 'discuss', 'voting', 'results', 'scoreboard'];
let shouldPreventRefresh = true;
const SESSION_KEY = 'oddinary_session_v1';

// --- Safety: Prevent Refresh ---
window.addEventListener('beforeunload', (e) => {
    // Only prompt if game is in progress
    if(shouldPreventRefresh && (State.round > 0)) {
        e.preventDefault();
        e.returnValue = '';
    }
});

// --- Game Controller ---
const Game = {
    init: () => {
        Game.loadSession();
        // If no players loaded (fresh session), start with empty names
        if(State.players.length === 0) {
            State.players = [
                { id: 101, name: "", score: 0 },
                { id: 102, name: "", score: 0 },
                { id: 103, name: "", score: 0 }
            ];
        }
    },

    saveSession: () => {
        const data = {
            players: State.players,
        };
        sessionStorage.setItem(SESSION_KEY, JSON.stringify(data));
    },

    loadSession: () => {
        const raw = sessionStorage.getItem(SESSION_KEY);
        if(raw) {
            try {
                const data = JSON.parse(raw);
                if(data.players) State.players = data.players;
                // Force reset scores to 0 on reload (New User Requirement)
                State.players.forEach(p => p.score = 0); 
            } catch(e) {
                console.error("Failed to load session", e);
            }
        }
    },

    showScreen: (name) => {
        Screens.forEach(s => $(`screen-${s}`).classList.remove('active'));
        $(`screen-${name}`).classList.add('active');
        window.scrollTo(0,0);
    },

    toggleRules: () => {
        const modal = $('modal-rules');
        modal.classList.toggle('open');
    },

    // Timer Settings
    toggleTimerSettings: () => {
        const enabled = $('setting-timer').checked;
        const sliderContainer = $('timer-slider-container');
        if(enabled) {
            sliderContainer.classList.remove('hidden');
        } else {
            sliderContainer.classList.add('hidden');
        }
    },

    updateTimerValue: (value) => {
        $('timer-value-display').innerText = `${value} min`;
        State.config.timerDuration = parseInt(value);
    },

    // --- Setup Phase ---
    goToSetup: () => {
        Game.showScreen('setup');
        Game.renderSetupInputs();
    },

    goHome: () => Game.showScreen('landing'),

    addPlayer: () => {
        if(State.players.length >= 30) return alert("Max 30 players!");
        State.players.push({ id: Date.now(), name: "", score: 0 });
        Game.saveSession();
        Game.renderSetupInputs(true); // Pass true to indicate new player added
    },

    removePlayer: (index) => {
        if(State.players.length <= 3) return alert("Min 3 players required!");
        State.players.splice(index, 1);
        Game.saveSession();
        Game.renderSetupInputs();
    },
    
    // Validate player name for duplicates
    validatePlayerName: (index) => {
        const errorEl = $('setup-error');
        const currentName = State.players[index].name.trim();
        
        // Check for duplicates
        const hasDuplicate = State.players.some((p, i) => 
            i !== index && p.name.trim().toLowerCase() === currentName.toLowerCase() && currentName !== ""
        );
        
        if(hasDuplicate) {
            errorEl.innerText = "Duplicate name! Please use unique names.";
            errorEl.classList.add('show');
            setTimeout(() => errorEl.classList.remove('show'), 3000);
            return false;
        }
        
        errorEl.classList.remove('show');
        return true;
    },

    onInputChange: (el, index) => {
        State.players[index].name = el.value;
        Game.validatePlayerName(index);
        Game.saveSession();
    },

    renderSetupInputs: (scrollToLast = false) => {
        const list = $('players-list');
        list.innerHTML = "";
        
        State.players.forEach((p, idx) => {
            const grp = document.createElement('div');
            grp.className = "input-group";
            grp.setAttribute('data-player-index', idx);
            
            grp.innerHTML = `
                <input type="text" 
                       id="player-input-${idx}"
                       value="${p.name}" 
                       placeholder="Enter player name"
                       oninput="Game.onInputChange(this, ${idx})"
                       required
                >
                <button class="btn btn-icon btn-danger" onclick="Game.removePlayer(${idx})">
                   <svg viewBox="0 0 24 24"><path d="M5 11h14v2H5z"/></svg>
                </button>
            `;
            list.appendChild(grp);
        });
        
        // Scroll to last player and focus if new player was added
        if(scrollToLast && State.players.length > 0) {
            setTimeout(() => {
                const lastIndex = State.players.length - 1;
                const lastInput = $(`player-input-${lastIndex}`);
                if(lastInput) {
                    lastInput.scrollIntoView({ behavior: 'smooth', block: 'center' });
                    lastInput.focus();
                }
            }, 100);
        }
    },

    startGame: () => {
        const errorEl = $('setup-error');
        
        // Validation: Check for empty names
        const hasEmpty = State.players.some(p => !p.name.trim());
        if(hasEmpty) {
            errorEl.innerText = "All players must have a name!";
            errorEl.classList.add('show');
            setTimeout(() => errorEl.classList.remove('show'), 3000);
            return;
        }
        
        // Check for duplicates
        const names = State.players.map(p => p.name.trim().toLowerCase());
        const hasDuplicates = names.some((name, idx) => names.indexOf(name) !== idx);
        if(hasDuplicates) {
            errorEl.innerText = "All player names must be unique!";
            errorEl.classList.add('show');
            setTimeout(() => errorEl.classList.remove('show'), 3000);
            return;
        }
        
        if(State.players.length < 3) {
            errorEl.innerText = "Min 3 players required!";
            errorEl.classList.add('show');
            setTimeout(() => errorEl.classList.remove('show'), 3000);
            return;
        }

        Game.saveSession();

        // Configs
        State.config.shuffle = $('setting-shuffle').checked;
        State.config.timer = $('setting-timer').checked;
        if(State.config.timer) {
            State.config.timerDuration = parseInt($('timer-duration-slider').value);
        }

        Game.setupNextRound();
    },

    setupNextRound: () => {
        State.round++;
        const pair = wordSelector.getRandomPair();
        
        if(Math.random() > 0.5) {
            State.words.common = pair[0];
            State.words.odd = pair[1];
        } else {
             State.words.common = pair[1];
             State.words.odd = pair[0];
        }

        const pIds = State.players.map(p => p.id);
        const oddIndex = Math.floor(Math.random() * pIds.length);
        State.currentOddPlayerId = pIds[oddIndex];
        
        State.roles = {};
        pIds.forEach(id => {
            State.roles[id] = (id === State.currentOddPlayerId) ? 'odd' : 'common';
        });

        State.playerOrder = [...pIds];
        if(State.config.shuffle) {
            State.playerOrder.sort(() => Math.random() - 0.5);
        }

        State.stepIndex = 0;
        State.votes = {};
        Game.showRevealScreen();
    },

    // --- Reveal Phase ---
    showRevealScreen: () => {
        const playerId = State.playerOrder[State.stepIndex];
        const player = State.players.find(p => p.id === playerId);
        
        $('reveal-player-name').innerText = player.name;
        $('reveal-counter').innerText = `Player ${State.stepIndex + 1}/${State.players.length}`;
        $('word-card').classList.remove('flipped');
        
        const role = State.roles[playerId];
        $('secret-word-display').innerText = (role === 'odd') ? State.words.odd : State.words.common;
        
        // Button Logic: Check if Last Player
        const nextBtn = $('btn-next-player');
        nextBtn.classList.add('hidden');
        
        if(State.stepIndex === State.players.length - 1) {
             nextBtn.innerHTML = `Discussion`;
        } else {
             nextBtn.innerHTML = `Hide & Pass`;
        }
        
        // Disable card flip initially
        State.canFlip = false;
        
        Game.showScreen('reveal');
        
        // Enable flip after player name is displayed (500ms delay)
        setTimeout(() => {
            State.canFlip = true;
        }, 500);
    },

    flipCard: () => {
        if(!State.canFlip) return; // Prevent flip before player name is shown
        
        const card = $('word-card');
        if(card.classList.contains('flipped')) return;
        
        card.classList.add('flipped');
        setTimeout(() => {
            $('btn-next-player').classList.remove('hidden');
        }, 800);
    },

    nextReveal: () => {
        // Hide button immediately to prevent double clicks
        $('btn-next-player').classList.add('hidden');
        
        // Flip card back first
        $('word-card').classList.remove('flipped');
        
        // Wait for animation (600ms) before changing content
        setTimeout(() => {
            State.stepIndex++;
            if(State.stepIndex < State.players.length) {
                Game.showRevealScreen();
            } else {
                Game.startDiscussion();
            }
        }, 600);
    },

    // --- Discussion ---
    startDiscussion: () => {
        Game.showScreen('discuss');
        const timerDisplay = $('timer-display');
        
        if(State.config.timer) {
            timerDisplay.classList.remove('hidden');
            let timeLeft = State.config.timerDuration * 60; // Convert minutes to seconds
            const tick = () => {
                const m = Math.floor(timeLeft / 60).toString().padStart(2,'0');
                const s = (timeLeft % 60).toString().padStart(2,'0');
                timerDisplay.innerText = `${m}:${s}`;
                if(timeLeft > 0) {
                    timeLeft--;
                    State.timerInterval = setTimeout(tick, 1000); 
                } else {
                    // Time's up!
                    alert("‚è∞ Time's up! Start voting now.");
                }
            };
            tick();
        } else {
            timerDisplay.classList.add('hidden');
        }
    },

    // --- Close Reveal Modal ---
    askCloseReveal: () => {
        $('modal-close-reveal').classList.add('open');
    },

    cancelCloseReveal: () => {
        $('modal-close-reveal').classList.remove('open');
    },

    confirmCloseReveal: () => {
        $('modal-close-reveal').classList.remove('open');
        Game.goToScoreboard();
    },

    // --- Forgot Word Feature ---
    showForgotWord: () => {
        const list = $('forgot-word-player-list');
        list.innerHTML = "";
        
        State.players.forEach(p => {
            const item = document.createElement('div');
            item.className = "player-select-item";
            item.innerText = p.name;
            item.onclick = () => Game.askForgotConfirm(p.id);
            list.appendChild(item);
        });
        
        $('modal-forgot-word').classList.add('open');
    },

    closeForgotWord: () => {
        $('modal-forgot-word').classList.remove('open');
    },

    askForgotConfirm: (playerId) => {
        State.pendingForgotPlayer = playerId;
        const player = State.players.find(p => p.id === playerId);
        $('confirm-forgot-name').innerText = player.name;
        $('modal-forgot-word').classList.remove('open');
        $('modal-confirm-forgot').classList.add('open');
    },

    cancelForgotConfirm: () => {
        $('modal-confirm-forgot').classList.remove('open');
        State.pendingForgotPlayer = null;
        $('modal-forgot-word').classList.add('open');
    },

    showForgotWordReveal: () => {
        const playerId = State.pendingForgotPlayer;
        const role = State.roles[playerId];
        const word = (role === 'odd') ? State.words.odd : State.words.common;
        
        $('forgot-word-display').innerText = word;
        $('modal-confirm-forgot').classList.remove('open');
        $('modal-word-reveal').classList.add('open');
    },

    closeWordReveal: () => {
        $('modal-word-reveal').classList.remove('open');
        State.pendingForgotPlayer = null;
    },

    // --- Points Rules ---
    showPointsRules: () => {
        $('modal-points-rules').classList.add('open');
    },

    closePointsRules: () => {
        $('modal-points-rules').classList.remove('open');
    },

    // --- Voting ---
    startVoting: () => {
        clearTimeout(State.timerInterval);
        State.stepIndex = 0;
        State.votes = {};
        Game.showVotingScreen();
    },

    showVotingScreen: () => {
        const voterId = State.playerOrder[State.stepIndex];
        const voter = State.players.find(p => p.id === voterId);
        
        $('voter-name').innerText = voter.name;
        
        const list = $('voting-list');
        list.innerHTML = "";
        
        State.players.forEach(p => {
            if(p.id === voterId) return; 
            
            const btn = document.createElement('BUTTON');
            btn.className = "btn";
            btn.innerText = p.name; 
            // Change to ask for confirmation
            btn.onclick = () => Game.askConfirmVote(voterId, p.id);
            list.appendChild(btn);
        });
        
        Game.showScreen('voting');
    },

    askConfirmVote: (voterId, targetId) => {
        State.pendingVoteTarget = targetId;
        const targetName = State.players.find(p => p.id === targetId).name;
        $('confirm-vote-name').innerText = targetName;
        $('modal-vote-confirm').classList.add('open');
    },

    confirmVote: () => {
        const voterId = State.playerOrder[State.stepIndex];
        const targetId = State.pendingVoteTarget;
        
        $('modal-vote-confirm').classList.remove('open');
        Game.submitVote(voterId, targetId);
    },

    cancelVote: () => {
        $('modal-vote-confirm').classList.remove('open');
        State.pendingVoteTarget = null;
    },

    submitVote: (voterId, targetId) => {
        State.votes[voterId] = targetId;
        State.stepIndex++;
        
        if(State.stepIndex < State.players.length) {
            Game.showVotingScreen();
        } else {
            Game.calculateResults();
        }
    },

    // --- Results ---
    // --- Results ---
    calculateResults: () => {
        const voteCounts = {}; 
        let maxVotes = 0;
        
        // Reset Round Scores (temp property)
        State.players.forEach(p => { 
            voteCounts[p.id] = 0; 
            p.roundScore = 0; 
        });
        
        Object.values(State.votes).forEach(targetId => {
            voteCounts[targetId] = (voteCounts[targetId] || 0) + 1;
            if(voteCounts[targetId] > maxVotes) maxVotes = voteCounts[targetId];
        });
        
        const oddId = State.currentOddPlayerId;
        const oddVotes = voteCounts[oddId] || 0;
        const oddPlayer = State.players.find(p => p.id === oddId);
        let roundStatus = "";

        // --- 1. PERFECT DECEPTION ---
        // Condition: VoteCount[OddPlayer] == 0
        if (oddVotes === 0) {
             oddPlayer.roundScore = 20;
             roundStatus = "Perfect Escape!";
        }
        else {
            // --- 2. ODD PLAYER CAUGHT ---
            // Condition: VoteCount[OddPlayer] is STRICTLY greater than any other player
            // This means oddVotes MUST be > all others.
            // If there is a tie for max votes, and odd player is one of them, it is NOT strictly greater.
            let isStrictlyHighest = true;
            for (const pid in voteCounts) {
                if (pid != oddId && voteCounts[pid] >= oddVotes) {
                    isStrictlyHighest = false;
                    break;
                }
            }

            if (isStrictlyHighest) {
                // Actions:
                // For each player p where Votes[p] == OddPlayer ‚Üí Score[p] += 10
                Object.entries(State.votes).forEach(([voterId, targetId]) => {
                    if(targetId == oddId) {
                         State.players.find(p => p.id == voterId).roundScore += 10;
                    }
                });
                roundStatus = "Imposter Caught!";
            }
            // --- 3. ODD PLAYER ESCAPES ---
            // Condition: VoteCount[OddPlayer] is NOT the highest among all players
            // Let's interpret "NOT the highest" as: oddVotes < maxVotes.
            else if (oddVotes < maxVotes) {
                 // Actions:
                 if (oddVotes > 0) {
                     oddPlayer.roundScore += 15;
                 }
                 // For each player p where Votes[p] == OddPlayer ‚Üí Score[p] += 5
                 Object.entries(State.votes).forEach(([voterId, targetId]) => {
                    if(targetId == oddId) {
                        State.players.find(p => p.id == voterId).roundScore += 5;
                    }
                 });
                 roundStatus = "Imposter Escaped!";
            }
            // --- 4. TIE (Implicit) ---
            else {
                // Award +5 points to the imposter for not getting caught
                oddPlayer.roundScore += 5;
                
                // Award +5 points to players who voted for the imposter even in a draw
                Object.entries(State.votes).forEach(([voterId, targetId]) => {
                    if(targetId == oddId) {
                        State.players.find(p => p.id == voterId).roundScore += 5;
                    }
                });
                roundStatus = "Draw!";
            }
        }
        
        // Accumulate and Save
        State.players.forEach(p => {
             p.score += p.roundScore;
        });
        Game.saveSession();

        Game.renderResults(voteCounts, oddPlayer, roundStatus);
    },
    
    renderResults: (voteCounts, oddPlayer, roundStatus) => {
        const area = $('results-area');
        area.innerHTML = "";
        
        // Always show "SCOREBOARD"
        const statusH = document.createElement('h2');
        statusH.innerText = "SCOREBOARD"; 
        statusH.style.marginBottom = "5px";
        statusH.style.color = "white"; 
        area.appendChild(statusH);

        const subH = document.createElement('h3');
        subH.innerText = roundStatus;
        subH.style.marginBottom = "20px";
        subH.className = "text-gold";
        area.appendChild(subH);
        
        const sortedPlayers = [...State.players].sort((a,b) => voteCounts[b.id] - voteCounts[a.id]);
        
        sortedPlayers.forEach(p => {
             const count = voteCounts[p.id];
             const rScore = p.roundScore > 0 ? `+${p.roundScore}` : `0`;
             const rClass = p.roundScore > 0 ? `text-primary` : `text-muted`;
             
             const wrap = document.createElement('div');
             wrap.style.width = "100%";
             wrap.style.marginBottom = "15px";
             
             wrap.innerHTML = `
                <div style="display:flex; justify-content:space-between; align-items:center;">
                    <span>${p.name}</span>
                    <span class="${rClass}" style="font-weight:bold;">${rScore} pts</span>
                </div>
                <div class="vote-bar-container">
                    <div class="vote-bar-fill" style="width: 0%;" data-w="${(count/State.players.length)*100}%"></div>
                    <span class="vote-count-text">${count} votes</span>
                </div>
             `;
             area.appendChild(wrap);
        });
        
        // Imposter Reveal Text
        $('imposter-reveal-text').innerText = `${oddPlayer.name} was the Imposter!`;
        
        $('res-common-word').innerText = State.words.common;
        $('res-odd-word').innerText = State.words.odd;
        
        Game.showScreen('results');
        
        setTimeout(() => {
            document.querySelectorAll('.vote-bar-fill').forEach(bar => {
                bar.style.width = bar.getAttribute('data-w');
            });
        }, 100);
    },
    
    goToScoreboard: () => {
        const area = $('scoreboard-list');
        area.innerHTML = "";
        
        const sorted = [...State.players].sort((a,b) => b.score - a.score);
        
        sorted.forEach((p, idx) => {
            const item = document.createElement('div');
            item.className = "list-item";
            if(idx === 0) item.style.borderColor = "var(--accent-gold)";
            
            item.innerHTML = `
                <div style="display:flex; align-items:center;">
                    <span style="font-weight:900; color:var(--text-muted); width:30px; text-align:right; margin-right:10px;">#${idx+1}</span>
                    <span style="font-size:1.2rem; font-weight:bold;">${p.name}</span>
                </div>
                <div style="text-align:right;">
                    <span class="text-primary" style="font-weight:900; font-size:1.2rem; display:block;">${p.score}</span>
                    <span class="text-muted" style="font-size:0.7rem;"></span>
                </div>
            `;
            area.appendChild(item);
        });
        
        Game.showScreen('scoreboard');
    },
    
    backToResults: () => {
        Game.showScreen('results');
    },
    
    // --- New Game Utils ---
    askNewGame: () => {
        $('modal-new-game-confirm').classList.add('open');
    },
    
    cancelNewGame: () => {
        $('modal-new-game-confirm').classList.remove('open');
    },

    confirmNewGame: () => {
        // Clear Persistence
        sessionStorage.removeItem(SESSION_KEY);
        // Hard Reload
        shouldPreventRefresh = false;
        location.reload();
    },

    resetGame: () => {
         // Deprecated
    }
};

Game.init();
</script>
</body>
</html>
